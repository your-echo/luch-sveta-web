# PLAN.md โ ะะปะฐะฝ ะฟัะพะตะบัะฐ ยซะัั ัะฒะตัะฐ: ะฒะตะฑ-API + ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะะะะะะฏยป

_ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต: 30.11.2025_

ะญัะพั ัะฐะนะป โ ะฟะพะปะฝัะน ะธ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝัะน ะฟะปะฐะฝ ะฟัะพะตะบัะฐ.  
ะัะปะธ ะบะพะณะดะฐ-ัะพ ัะฐั ั ะะ ะฟะพัะตััะตััั, ะดะพััะฐัะพัะฝะพ:

1. ะัะบัััั ััะพั `PLAN.md`
2. ะัะดะตะปะธัั ะฝัะถะฝัะน ะบััะพะบ (ััะฐะฟ ะธะปะธ ะฟะพะดะฟัะฝะบั)
3. ะัะธัะปะฐัั ะตะณะพ ะะ ัะพ ัะปะพะฒะฐะผะธ:  
   > ยซะัะพะดะพะปะถะฐะตะผ ะฒะพั ั ััะพะณะพ ะผะตััะฐ ะฟะปะฐะฝะฐยป

---

## ๐ ะะฑัะฐั ะธะดะตั ะฟัะพะตะบัะฐ

ะั ะดะตะปะฐะตะผ **ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต + ะฒะตะฑ-API** ะดะปั ัะฐะทะดะตะปะฐ **ยซะะะะะะฏยป** ะฒะฝัััะธ Telegram-ะฑะพัะฐ ยซะัั ัะฒะตัะฐยป.

- ะะพะปัะทะพะฒะฐัะตะปั ะฒ ะฑะพัะต ะฝะฐะถะธะผะฐะตั ะบะฝะพะฟะบั **ยซะะะะะะฏ ๐ยป** โ ะพัะบััะฒะฐะตััั **WebApp** ะธะปะธ ัััะปะบะฐ ะฝะฐ ะฒะตะฑ-ัััะฐะฝะธัั.
- ะะตะฑ-ัััะฐะฝะธัะฐ ะฟะพะบะฐะทัะฒะฐะตั:
  - ัะฟะธัะพะบ **ัะฐะทะดะตะปะพะฒ** (ะบะฐัะตะณะพัะธะน ะทะฝะฐะฝะธะน),
  - ะฒะฝัััะธ ะบะฐะถะดะพะณะพ ัะฐะทะดะตะปะฐ โ ัะฟะธัะพะบ **ะผะฐัะตัะธะฐะปะพะฒ** (ัะตะบัั, ะฐัะดะธะพ, ะฒะธะดะตะพ, ะธะทะพะฑัะฐะถะตะฝะธั, PDF, ะดั.).
- **ะะดะผะธะฝ (ะะฐัะบ)** ะฟัะธ ะพัะบัััะธะธ ัะพะณะพ ะถะต ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ:
  - ะฒะธะดะธั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ัะปะตะผะตะฝัั:  
    ยซะะพะฑะฐะฒะธัั ัะฐะทะดะตะปยป, ยซะะพะฑะฐะฒะธัั ะผะฐัะตัะธะฐะปยป, ยซะฃะดะฐะปะธััยป, ยซะะฐะณััะทะธัั ัะฐะนะปยป ะธ ั.ะฟ.
- ะคะฐะนะปั (ะบะฐััะธะฝะบะธ, ะฐัะดะธะพ, ะฒะธะดะตะพ, pdf ะธ ั.ะด.) ััะฐะฝัััั ะฒ **Cloudflare R2** (bucket: `luch-sveta`).
- ะะตัะฐะดะฐะฝะฝัะต (ัะฐะทะดะตะปั, ะผะฐัะตัะธะฐะปั, ัะธะฟั, ัััะปะบะธ ะฝะฐ ัะฐะนะปั) ััะฐะฝัััั ะฒ **SQLite**.
- ะัะบะตะฝะด ะบัััะธััั ะฝะฐ **Render** ะบะฐะบ **Web Service**.

ะะฒัะพัะธะทะฐัะธั ะฐะดะผะธะฝะฐ โ ะฟะพ **Telegram ID**, ะบะพัะพััะน ะฟะตัะตะดะฐัััั ะฒ ะฒะตะฑ-ัััะฐะฝะธัั ะธะท ะฑะพัะฐ (ัะตัะตะท WebApp ะธะปะธ GET-ะฟะฐัะฐะผะตััั); ะฝะฐ ะฑัะบะตะฝะดะต ะตััั ัะฟะธัะพะบ `ADMINS`.

---

## โ๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

- ะฏะทัะบ: **Python 3.11**
- ะะตะฑ-ััะตะนะผะฒะพัะบ: **FastAPI**
- ะกะตัะฒะตั: **uvicorn**
- ะะ: **SQLite** (ัะตัะตะท `aiosqlite`)
- ะะฑัะฐะฑะพัะบะฐ multipart/form-data (ะทะฐะณััะทะบะฐ ัะฐะนะปะพะฒ): `python-multipart`
- ะะพัััะฟ ะบ Cloudflare R2 (S3-ัะพะฒะผะตััะธะผัะน API): `boto3` ะธะปะธ `aioboto3` (ะฝะฐ ััะฐััะต ะผะพะถะฝะพ ัะธะฝััะพะฝะฝัะน `boto3`)
- ะจะฐะฑะปะพะฝั ััะพะฝัะตะฝะดะฐ: `Jinja2` (ะฟัะพัััะต HTML + ะฝะตะผะฝะพะณะพ JS)
- ะะตะฟะปะพะน: **Render.com** (Web Service, ะฐะฒัะพะดะตะฟะปะพะน ั GitHub)
- ะฅัะฐะฝะธะปะธัะต ัะฐะนะปะพะฒ: **Cloudflare R2**, bucket: `luch-sveta`

---

## ๐งฑ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ (ะฟัะตะดะปะฐะณะฐะตะผะฐั)

ะะตะฟะพะทะธัะพัะธะน ะฝะฐ GitHub (ะฝะฐะทะฒะฐะฝะธะต ะผะพะถะฝะพ, ะฝะฐะฟัะธะผะตั, `luch-sveta-web`):

```text
luch-sveta-web/
 โโโ app/
 โ   โโโ __init__.py
 โ   โโโ main.py              # ะขะพัะบะฐ ะฒัะพะดะฐ FastAPI (app = FastAPI(...))
 โ   โโโ config.py            # ะะฐัััะพะนะบะธ ะฟัะพะตะบัะฐ (ADMINS, R2, ะฟััะธ ะธ ั.ะฟ.)
 โ   โโโ db.py                # ะะฐะฑะพัะฐ ั ะฑะฐะทะพะน (ะฟะพะดะบะปััะตะฝะธะต, init)
 โ   โโโ models.py            # SQL-ััััะบัััั / ััะฝะบัะธะธ ะดะปั sections, materials
 โ   โโโ r2_storage.py        # ะะฐะฑะพัะฐ ั Cloudflare R2 (ะทะฐะณััะทะบะฐ/ัะดะฐะปะตะฝะธะต ัะฐะนะปะพะฒ)
 โ   โโโ routers/
 โ   โ   โโโ public.py        # ะัะฑะปะธัะฝัะต ัะฝะดะฟะพะธะฝัั (ัะฟะธัะพะบ ัะฐะทะดะตะปะพะฒ, ะผะฐัะตัะธะฐะปะพะฒ)
 โ   โ   โโโ admin.py         # ะะดะผะธะฝัะบะธะต ัะฝะดะฟะพะธะฝัั (CRUD, ะทะฐะณััะทะบะฐ ัะฐะนะปะพะฒ)
 โ   โ   โโโ health.py        # /health, /ping ะธ ั.ะฟ.
 โ   โโโ templates/
 โ   โ   โโโ base.html
 โ   โ   โโโ app.html         # ะัะฝะพะฒะฝะฐั ัััะฐะฝะธัะฐ ะดะปั ยซะะะะะะยป
 โ   โ   โโโ admin_modals.html (ะพะฟัะธะพะฝะฐะปัะฝะพ)
 โ   โโโ static/
 โ       โโโ css/
 โ       โ   โโโ style.css
 โ       โโโ js/
 โ           โโโ app.js       # ะะพะณะธะบะฐ ััะพะฝัะตะฝะดะฐ, ัะฐะฑะพัะฐ ั API
 โโโ database/
 โ   โโโ (ััะดะฐ ะฒะพ ะฒัะตะผั ัะฐะฑะพัั ะบะปะฐะดัััั SQLite-ัะฐะนะป, ะฝะฐะฟั. knowledge.db)
 โโโ requirements.txt
 โโโ PLAN.md                  # ะญัะพั ะฟะปะฐะฝ
 โโโ README.md
 โโโ (ะพะฟัะธะพะฝะฐะปัะฝะพ: .gitignore, render.yaml ะธ ั.ะฟ.)
